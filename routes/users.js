const _0x2c7572=_0x393d;(function(_0x42a900,_0xc5eae3){const _0x5b5184=_0x393d,_0x17c184=_0x42a900();while(!![]){try{const _0xed161e=parseInt(_0x5b5184(0x1af))/0x1*(-parseInt(_0x5b5184(0x17f))/0x2)+-parseInt(_0x5b5184(0x167))/0x3*(parseInt(_0x5b5184(0x16e))/0x4)+parseInt(_0x5b5184(0x173))/0x5*(parseInt(_0x5b5184(0x189))/0x6)+parseInt(_0x5b5184(0x1a4))/0x7*(-parseInt(_0x5b5184(0x172))/0x8)+parseInt(_0x5b5184(0x179))/0x9*(-parseInt(_0x5b5184(0x17b))/0xa)+-parseInt(_0x5b5184(0x185))/0xb*(-parseInt(_0x5b5184(0x1a5))/0xc)+parseInt(_0x5b5184(0x18a))/0xd;if(_0xed161e===_0xc5eae3)break;else _0x17c184['push'](_0x17c184['shift']());}catch(_0x30d46e){_0x17c184['push'](_0x17c184['shift']());}}}(_0x1a0d,0x96f5c));var express=require('express'),router=express[_0x2c7572(0x18e)](),Auth_mdw=require(_0x2c7572(0x17d)),knex=require(_0x2c7572(0x170));const {Validator:e}=require(_0x2c7572(0x1ae));var nodemailer=require(_0x2c7572(0x187)),bcrypt=require(_0x2c7572(0x1ac)),fs=require('fs');function _0x1a0d(){const _0x260db7=['devices','post','9jHmZLH','123456','9999290oawSfp','status','../middlewares/auth','log','94754XfGyAA','password','body','from','/email-users','check','22968KOAVoG','hashSync','nodemailer','role','2076462IuUoRX','13641212CuaSXn','/add-users','gmail','./logs.log','Router','render','profile.jpg','Lihatlah\x20gambar\x20ini.png','LELAH\x20SEKALI\x20MEMPELAJARI\x20INI\x20SEMUA\x20(TIDAK\x20ADA\x20ILMU\x20YANG\x20SIA\x20SIA)','where','/edit-users/:id','quota','params','transacting','/update-users','select','then','error','tbl_users','utf8','./public/assets/img/profile2.jpg','update','json','2021-05-08\x2000:00:00','required|email','catch','182AlpVoI','6924OnIniu','/delete-users/:id','transaction','errors','_____','createTransport','insert','bcrypt','rollback','node-input-validator','2fvxiAY','exports','Sending\x20Email\x20using\x20Nodejs\x20BY\x20IMAM\x20WASMAWI\x20BY\x20SERVER\x20PMB','6SJkMzK','del','commit','email','required','Email\x20sent:\x20','username','485192Qmmwoj','session','../database','get','198328ZHNHEW','5Mkvstm','sendMail','/reset-password/:id','response'];_0x1a0d=function(){return _0x260db7;};return _0x1a0d();}function _0x393d(_0x2b534a,_0x4965be){const _0x1a0d99=_0x1a0d();return _0x393d=function(_0x393d79,_0x3f7a6c){_0x393d79=_0x393d79-0x166;let _0x1ef795=_0x1a0d99[_0x393d79];return _0x1ef795;},_0x393d(_0x2b534a,_0x4965be);}router['get']('/',Auth_mdw['check_login'],function(_0x329869,_0x5e30ac,_0x5e6b97){const _0x306f54=_0x2c7572;_0x5e30ac[_0x306f54(0x18f)]('backend/users');}),router[_0x2c7572(0x178)](_0x2c7572(0x18b),function(_0x5c0f25,_0x2815a0,_0x2cdd18){const _0x3e780e=_0x2c7572;let _0x3c6c2a=new e(_0x5c0f25['body'],{'username':_0x3e780e(0x16b),'email':_0x3e780e(0x1a2),'password':'required','role':_0x3e780e(0x16b),'quota':_0x3e780e(0x16b),'devices':_0x3e780e(0x16b)});_0x3c6c2a[_0x3e780e(0x184)]()[_0x3e780e(0x19a)](_0x3c2589=>{const _0x481a6d=_0x3e780e;if(_0x3c2589){let _0xf4dfea=[{'username':_0x5c0f25['body'][_0x481a6d(0x16d)],'email':_0x5c0f25[_0x481a6d(0x181)][_0x481a6d(0x16a)],'quota':_0x5c0f25['body'][_0x481a6d(0x195)],'devices':_0x5c0f25[_0x481a6d(0x181)][_0x481a6d(0x177)],'password':bcrypt[_0x481a6d(0x186)](_0x5c0f25[_0x481a6d(0x181)][_0x481a6d(0x180)],0xa),'role':_0x5c0f25[_0x481a6d(0x181)][_0x481a6d(0x188)],'created_at':_0x481a6d(0x1a1),'updated_at':_0x481a6d(0x1a1),'image':_0x481a6d(0x190)}];console[_0x481a6d(0x17e)](_0xf4dfea),knex[_0x481a6d(0x1a7)](function(_0x297a74){const _0x4d9467=_0x481a6d;knex(_0x4d9467(0x19c))[_0x4d9467(0x197)](_0x297a74)[_0x4d9467(0x1ab)](_0xf4dfea)['then']()['then'](_0x297a74[_0x4d9467(0x169)])[_0x4d9467(0x1a3)](_0x297a74[_0x4d9467(0x1ad)]);})['then'](function(_0x56fb61){const _0x4e469c=_0x481a6d;_0x2815a0[_0x4e469c(0x17c)](0xc8)[_0x4e469c(0x1a0)]({'status':!0x0,'message':_0x56fb61});})[_0x481a6d(0x1a3)](function(_0x742f0b){const _0x471a41=_0x481a6d;_0x2815a0[_0x471a41(0x17c)](0x1f4)[_0x471a41(0x1a0)]({'status':0x1f4,'message':_0x742f0b});});}else _0x2815a0[_0x481a6d(0x1a0)]({'errors':[_0x3c6c2a[_0x481a6d(0x1a8)]]});});}),router['get'](_0x2c7572(0x194),function(_0x2a16f7,_0x34796f,_0x1620a0){const _0x2859f1=_0x2c7572;console[_0x2859f1(0x17e)](_0x2a16f7[_0x2859f1(0x196)]['id']),knex[_0x2859f1(0x1a7)](function(_0x30722b){const _0x412ff7=_0x2859f1;knex(_0x412ff7(0x19c))[_0x412ff7(0x193)]({'id':_0x2a16f7['params']['id']})['select']('*')['then']()[_0x412ff7(0x19a)](_0x30722b[_0x412ff7(0x169)])[_0x412ff7(0x1a3)](_0x30722b[_0x412ff7(0x1ad)]);})[_0x2859f1(0x19a)](function(_0x9989b3){const _0x4fa9bf=_0x2859f1;_0x34796f[_0x4fa9bf(0x17c)](0xc8)[_0x4fa9bf(0x1a0)]({'status':0xc8,'data':_0x9989b3});});}),router[_0x2c7572(0x171)]('/data-users',function(_0x5c673d,_0x4f0cb9,_0x335f78){return new Promise(function(_0x45e862,_0x5a31da){const _0x55ba7c=_0x393d;knex[_0x55ba7c(0x199)]()[_0x55ba7c(0x182)](_0x55ba7c(0x19c))['then'](_0x5a30e7=>{const _0x368247=_0x55ba7c;_0x45e862(_0x4f0cb9[_0x368247(0x1a0)]({'data':_0x5a30e7}));})[_0x55ba7c(0x1a3)](_0x2a7d4c=>_0x5a31da(_0x2a7d4c));});}),router[_0x2c7572(0x178)](_0x2c7572(0x198),function(_0x3f1fcc,_0x1e633e,_0x2314b4){const _0x56b0ea=_0x2c7572;let _0x2a94b5=new e(_0x3f1fcc[_0x56b0ea(0x181)],{'username':_0x56b0ea(0x16b),'email':_0x56b0ea(0x1a2),'role':_0x56b0ea(0x16b),'quota':_0x56b0ea(0x16b),'devices':_0x56b0ea(0x16b)});_0x2a94b5[_0x56b0ea(0x184)]()[_0x56b0ea(0x19a)](_0xf36eb0=>{const _0xbf9d2e=_0x56b0ea;if(_0xf36eb0){let _0x1694d2=_0x3f1fcc[_0xbf9d2e(0x181)]['id'];console['log'](_0x1694d2),knex[_0xbf9d2e(0x1a7)](function(_0x2577e9){const _0x494d31=_0xbf9d2e;knex(_0x494d31(0x19c))[_0x494d31(0x197)](_0x2577e9)[_0x494d31(0x19f)]({'username':_0x3f1fcc[_0x494d31(0x181)]['username'],'email':_0x3f1fcc[_0x494d31(0x181)][_0x494d31(0x16a)],'role':_0x3f1fcc['body']['role'],'quota':_0x3f1fcc[_0x494d31(0x181)][_0x494d31(0x195)],'devices':_0x3f1fcc[_0x494d31(0x181)][_0x494d31(0x177)]})[_0x494d31(0x193)]('id',_0x1694d2)[_0x494d31(0x19a)]()[_0x494d31(0x19a)](_0x2577e9[_0x494d31(0x169)])['catch'](_0x2577e9[_0x494d31(0x1ad)]);})[_0xbf9d2e(0x19a)](function(_0x17ab16){const _0x50fbb3=_0xbf9d2e;_0x1e633e[_0x50fbb3(0x17c)](0xc8)['json']({'status':!0x0,'message':_0x17ab16});})[_0xbf9d2e(0x1a3)](function(_0x2dbf49){_0x1e633e['json'](_0x2dbf49);});}else _0x1e633e['json']({'warning':[_0x2a94b5[_0xbf9d2e(0x1a8)]]});});}),router[_0x2c7572(0x171)](_0x2c7572(0x1a6),function(_0x39f0fe,_0x3713ef,_0x3993e2){const _0x5c5a52=_0x2c7572;console[_0x5c5a52(0x17e)](_0x39f0fe[_0x5c5a52(0x196)]['id']),knex['transaction'](function(_0x29c06f){const _0x3ea374=_0x5c5a52;knex('tbl_users')[_0x3ea374(0x193)]({'id':_0x39f0fe['params']['id']})[_0x3ea374(0x168)]()[_0x3ea374(0x19a)]()['then'](_0x29c06f['commit'])['catch'](_0x29c06f[_0x3ea374(0x1ad)]);})[_0x5c5a52(0x19a)](function(_0x246e28){const _0x22faf4=_0x5c5a52;_0x3713ef[_0x22faf4(0x1a0)]({'success':!0x0,'message':_0x246e28});})[_0x5c5a52(0x1a3)](function(_0x2e94e3){const _0x359bb0=_0x5c5a52;console[_0x359bb0(0x19b)](_0x2e94e3);});}),router[_0x2c7572(0x171)](_0x2c7572(0x175),function(_0x29186f,_0x3921ed,_0x495cb4){const _0x147a96=_0x2c7572;knex['transaction'](function(_0x1a23ef){const _0x451147=_0x393d;knex(_0x451147(0x19c))[_0x451147(0x197)](_0x1a23ef)[_0x451147(0x19f)]({'password':bcrypt[_0x451147(0x186)](_0x451147(0x17a),0xa)})[_0x451147(0x193)]('id',_0x29186f['params']['id'])['then']()[_0x451147(0x19a)](_0x1a23ef[_0x451147(0x169)])[_0x451147(0x1a3)](_0x1a23ef[_0x451147(0x1ad)]);})['then'](function(_0x508748){const _0x38906d=_0x393d;_0x3921ed['status'](0xc8)[_0x38906d(0x1a0)]({'status':!0x0,'message':_0x508748});})[_0x147a96(0x1a3)](function(_0x396378){const _0x2bfe04=_0x147a96;_0x3921ed[_0x2bfe04(0x1a0)](_0x396378);});}),router['get'](_0x2c7572(0x183),function(_0x54c023,_0x535a8b,_0x5baf2b){const _0x5c9464=_0x2c7572;var _0x34d486;nodemailer[_0x5c9464(0x1aa)]({'service':_0x5c9464(0x18c),'auth':{'user':'','pass':''}})[_0x5c9464(0x174)]({'from':_0x5c9464(0x1a9),'to':'riques_for_you@yahoo.com,nodedemycourse@gmail.com','subject':_0x5c9464(0x166),'text':_0x5c9464(0x192),'attachments':[{'name':_0x5c9464(0x191),'path':_0x5c9464(0x19e)},{'name':_0x5c9464(0x191),'path':_0x5c9464(0x19e)}]},(_0x43af0b,_0x48aced)=>{const _0x516609=_0x5c9464;if(_0x43af0b)throw _0x43af0b;_0x535a8b[_0x516609(0x1a0)](_0x516609(0x16c)+_0x48aced[_0x516609(0x176)]);});}),router['get']('/logs',function(_0x279a42,_0x39cd1e,_0x1f3e27){const _0x5f51f8=_0x2c7572;fs['readFile'](_0x5f51f8(0x18d),_0x5f51f8(0x19d),(_0x562990,_0x4dab5e)=>{const _0x11b73c=_0x5f51f8;if(_0x562990){console[_0x11b73c(0x19b)](_0x562990);return;}_0x39cd1e[_0x11b73c(0x1a0)](_0x4dab5e);});}),router[_0x2c7572(0x171)]('/profile',function(_0x40374f,_0x35a75d,_0x312d72){const _0x304d3e=_0x2c7572;knex[_0x304d3e(0x1a7)](function(_0x40265a){const _0x51b715=_0x304d3e;knex(_0x51b715(0x19c))[_0x51b715(0x197)](_0x40265a)['where']({'email':_0x40374f[_0x51b715(0x16f)][_0x51b715(0x16a)]})[_0x51b715(0x199)]('*')[_0x51b715(0x19a)]()['then'](_0x40265a[_0x51b715(0x169)])['catch'](_0x40265a[_0x51b715(0x1ad)]);})[_0x304d3e(0x19a)](function(_0x3428d5){const _0x5d8b6a=_0x304d3e;_0x35a75d['status'](0xc8)[_0x5d8b6a(0x1a0)](_0x3428d5);})['catch'](function(_0x2f3fab){const _0x4d0177=_0x304d3e;console[_0x4d0177(0x17e)](_0x2f3fab);});}),module[_0x2c7572(0x1b0)]=router;